!function(l,i,e){var r=l(document);(i=i||{}).updates=i.updates||{},i.updates.l10n=_.extend(i.updates.l10n,e.l10n||{}),i.updates.importDemo=function(e){var a=l('.demo-import[data-slug="'+e.slug+'"]');return r.find("body").hasClass("full-overlay-active")&&(a=l(".wp-full-overlay-header, .wp-full-overlay-footer").find(".demo-import")),e=_.extend({success:i.updates.importDemoSuccess,error:i.updates.importDemoError},e),a.addClass("updating-message"),a.parents(".theme").addClass("focus"),a.html()!==i.updates.l10n.importing&&a.data("originaltext",a.html()),a.text(i.updates.l10n.importing).attr("aria-label",i.updates.l10n.demoImportingLabel.replace("%s",a.data("name"))),i.a11y.speak(i.updates.l10n.importingMsg,"polite"),l('.install-theme-info, [data-slug="'+e.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),r.trigger("wp-demo-importing",e),i.updates.ajax("import-demo",e)},i.updates.importDemoSuccess=function(e){var a,t=l(".wp-full-overlay-header, .wp-full-overlay-footer, [data-slug="+e.slug+"]");r.trigger("wp-demo-import-success",e),a=t.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",i.updates.l10n.demoImportedLabel.replace("%s",e.demoName)).text(i.updates.l10n.imported),i.a11y.speak(i.updates.l10n.importedMsg,"polite"),setTimeout(function(){e.previewUrl&&(a.siblings(".demo-preview").remove(),a.attr("target","_blank").attr("href",e.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",i.updates.l10n.livePreviewLabel.replace("%s",e.demoName)).text(i.updates.l10n.livePreview))},1e3)},i.updates.importDemoError=function(e){var a,t=i.updates.l10n.importFailed.replace("%s",e.errorMessage),s=i.updates.adminNotice({className:"update-message notice-error notice-alt",message:t});i.updates.isValidResponse(e,"import")&&(i.updates.maybeHandleCredentialError(e,"import-demo")||(r.find("body").hasClass("full-overlay-active")?(a=l('.demo-import[data-slug="'+e.slug+'"]'),l(".install-theme-info").prepend(s)):a=l('[data-slug="'+e.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(s).find(".demo-import"),a.removeClass("updating-message").attr("aria-label",i.updates.l10n.demoImportFailedLabel.replace("%s",a.data("name"))).text(i.updates.l10n.importFailedShort),i.a11y.speak(t,"assertive"),r.trigger("wp-demo-import-error",e)))},i.updates.bulkInstallPlugin=function(e){var a,t,s;return e=_.extend({success:i.updates.bulkInstallPluginSuccess,error:i.updates.bulkInstallPluginError},e),r.find("body").hasClass("full-overlay-active")?(a=l('tr[data-slug="'+e.slug+'"]'),t=l('.theme-install-overlay .demo-import[data-slug="'+e.demo+'"]'),s=i.updates.l10n.pluginInstallingLabel.replace("%s",a.data("name")),a.find(".plugin-status span").addClass("updating-message").attr("aria-label",i.updates.l10n.pluginInstallingLabel.replace("%s",a.data("name"))).text(i.updates.l10n.installing)):(t=l('.demo-import[data-slug="'+e.demo+'"]'),s=i.updates.l10n.pluginInstallingLabel.replace("%s",e.name),t.parents(".theme").addClass("focus")),t.html()!==i.updates.l10n.installing&&t.data("originaltext",t.html()),t.attr("aria-label",s).addClass("updating-message").text(i.updates.l10n.installing),i.a11y.speak(i.updates.l10n.installingMsg,"polite"),r.trigger("wp-plugin-bulk-installing",e),i.updates.ajax("install-required-plugin",e)},i.updates.bulkInstallPluginSuccess=function(e){l('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",i.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(i.updates.l10n.pluginInstalled),i.a11y.speak(i.updates.l10n.installedMsg,"polite"),r.trigger("wp-plugin-bulk-install-success",e)},i.updates.bulkInstallPluginError=function(e){var a,t=l('tr[data-slug="'+e.slug+'"]'),s=t.find(".plugin-status span");i.updates.isValidResponse(e,"install")&&(i.updates.maybeHandleCredentialError(e,"install-plugin")||(a=i.updates.l10n.installFailed.replace("%s",e.errorMessage),s.removeClass("updating-message").addClass("updated-message").attr("aria-label",i.updates.l10n.pluginInstallFailedLabel.replace("%s",t.data("name"))).text(i.updates.l10n.installFailedShort),i.a11y.speak(a,"assertive"),r.trigger("wp-plugin-bulk-install-error",e)))},i.updates.isValidResponse=function(e,a){var t,s=i.updates.l10n.unknownError;if(_.isObject(e)&&!_.isFunction(e.always))return!0;switch(_.isString(e)&&"-1"===e?s=i.updates.l10n.nonceError:_.isString(e)?s=e:"undefined"!=typeof e.readyState&&0===e.readyState?s=i.updates.l10n.connectionError:_.isString(e.statusText)&&(s=e.statusText+" "+i.updates.l10n.statusTextLink),a){case"import":t=i.updates.l10n.importFailed}return t=t.replace("%s",s),i.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(t)}),i.updates.ajaxLocked=!1,i.updates.queue=[],l(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(i.updates.l10n.importFailedShort),i.a11y.speak(t,"assertive"),!1},i.updates.queueChecker=function(){var e;if(!i.updates.ajaxLocked&&i.updates.queue.length){switch((e=i.updates.queue.shift()).action){case"import-demo":i.updates.importDemo(e.data);break;case"install-plugin":i.updates.bulkInstallPlugin(e.data)}r.trigger("wp-updates-queue-job",e)}}}(jQuery,window.wp,window._demoUpdatesSettings);